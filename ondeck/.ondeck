#! /usr/bin/env bash

function vpn() {
  sudo kextload /Library/Extensions/tap.kext
  sudo kextload /Library/Extensions/tun.kext
  sudo openconnect -b --pid-file=/var/run/openconnect.pid https://vpn.ondeck.com \
  --user=rboll@ondeck.com
}

function odchat() {
  mcabber -f ~/.mcabber-odc/mcabberrc
}

function vpnoff() {
  sudo -v
  local pid=`sudo cat /var/run/openconnect.pid`
  if [  ! -z $pid ]; then
    sudo kill -9 $pid
    rm /var/run/openconnect.pid
    echo "killed"
  else
    echo "not running"
  fi
}

function vpns() {
  sudo -v
  local pid=`sudo cat /var/run/openconnect.pid`
  if [  ! -z $pid ]; then
    echo "true"
  else
    echo "false"
  fi
}
